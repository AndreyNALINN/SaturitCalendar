    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∏–≥–∞–¥–∞–º–∏ –∏ —Å–∫–ª–∞–¥–æ–º</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #1d1d1f;
            font-size: 14px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
            box-sizing: border-box;
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 1200px;
                padding: 20px;
            }
            body {
                font-size: 16px;
            }
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        @media (min-width: 768px) {
            .header {
                border-radius: 20px;
                padding: 20px;
                margin-bottom: 20px;
            }
        }
        
        .header h1 {
            margin: 0;
            color: #1d1d1f;
            font-size: 20px;
            font-weight: 600;
            flex: 1;
            min-width: 200px;
        }
        
        @media (min-width: 768px) {
            .header h1 {
                font-size: 28px;
            }
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .user-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
        }
        
        @media (min-width: 768px) {
            .user-badge {
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 14px;
            }
        }
        
        .logout-btn {
            background: #ff3b30;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        @media (min-width: 768px) {
            .logout-btn {
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 14px;
            }
        }
        
        .logout-btn:hover {
            background: #d70015;
            transform: translateY(-2px);
        }
        
        .main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        @media (min-width: 768px) {
            .main-content {
                border-radius: 20px;
            }
        }
        
        .tabs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        @media (min-width: 768px) {
            .tabs {
                display: flex;
            }
        }
        
        .tab {
            padding: 12px 8px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 12px;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s ease;
            position: relative;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        @media (min-width: 768px) {
            .tab {
                flex: 1;
                padding: 20px;
                font-size: 16px;
            }
        }
        
        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }
        
        .tab:hover:not(.active) {
            background: #e9ecef;
            color: #495057;
        }
        
        .tab-content {
            display: none;
            padding: 15px;
            animation: fadeIn 0.3s ease;
        }
        
        @media (min-width: 768px) {
            .tab-content {
                padding: 30px;
            }
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #e9ecef;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            margin-bottom: 1px;
        }
        
        @media (min-width: 768px) {
            .calendar {
                border-radius: 12px;
            }
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #e9ecef;
            border-radius: 0 0 8px 8px;
            overflow: hidden;
        }
        
        @media (min-width: 768px) {
            .calendar-grid {
                border-radius: 0 0 12px 12px;
            }
        }
        
        .calendar-header {
            text-align: center;
            font-weight: 600;
            padding: 8px 4px;
            background: #667eea;
            color: white;
            font-size: 11px;
        }
        
        @media (min-width: 768px) {
            .calendar-header {
                padding: 15px 10px;
                font-size: 14px;
            }
        }
        
        .calendar-day {
            background: white;
            padding: 6px 4px;
            min-height: 80px;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
        }
        
        @media (min-width: 480px) {
            .calendar-day {
                min-height: 100px;
                padding: 8px 6px;
            }
        }
        
        @media (min-width: 768px) {
            .calendar-day {
                min-height: 120px;
                padding: 12px 8px;
            }
        }
        
        .calendar-day:hover {
            background: #f8f9fa;
            transform: scale(1.02);
        }
        
        .calendar-day.today {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .calendar-day.other-month {
            background: #f8f9fa;
            color: #adb5bd;
        }
        
        .day-number {
            font-weight: 600;
            margin-bottom: 2px;
            font-size: 10px;
            line-height: 1;
        }
        
        @media (min-width: 480px) {
            .day-number {
                margin-bottom: 4px;
                font-size: 12px;
            }
        }
        
        @media (min-width: 768px) {
            .day-number {
                margin-bottom: 8px;
                font-size: 16px;
            }
        }
        
        .event {
            font-size: 8px;
            color: white;
            padding: 1px 3px;
            border-radius: 3px;
            margin-bottom: 1px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
            line-height: 1.1;
            max-width: 100%;
        }
        
        @media (min-width: 480px) {
            .event {
                font-size: 9px;
                padding: 2px 4px;
                margin-bottom: 2px;
                border-radius: 4px;
                line-height: 1.2;
            }
        }
        
        @media (min-width: 768px) {
            .event {
                font-size: 11px;
                padding: 3px 6px;
                border-radius: 6px;
            }
        }
        
        .vacation {
            background: linear-gradient(135deg, #34c759, #28a745);
        }
        
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        @media (min-width: 768px) {
            .toggle-container {
                gap: 10px;
                margin-bottom: 20px;
            }
        }
        
        .toggle {
            position: relative;
            width: 40px;
            height: 22px;
            background: #ccc;
            border-radius: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        @media (min-width: 768px) {
            .toggle {
                width: 50px;
                height: 26px;
                border-radius: 13px;
            }
        }
        
        .toggle.active {
            background: #667eea;
        }
        
        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        @media (min-width: 768px) {
            .toggle-slider {
                width: 22px;
                height: 22px;
            }
        }
        
        .toggle.active .toggle-slider {
            transform: translateX(18px);
        }
        
        @media (min-width: 768px) {
            .toggle.active .toggle-slider {
                transform: translateX(24px);
            }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }
        
        @media (min-width: 768px) {
            .modal-content {
                padding: 30px;
                border-radius: 20px;
                width: 450px;
                max-width: 90%;
                max-height: 80vh;
            }
        }
        
        @keyframes modalSlideIn {
            from { opacity: 0; transform: scale(0.8) translateY(-50px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        @media (min-width: 768px) {
            .form-group {
                margin-bottom: 20px;
            }
        }
        
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #495057;
            font-size: 14px;
        }
        
        @media (min-width: 768px) {
            label {
                margin-bottom: 8px;
            }
        }
        
        input, select, textarea {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        @media (min-width: 768px) {
            input, select, textarea {
                padding: 12px 16px;
                border-radius: 12px;
            }
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        @media (min-width: 768px) {
            button {
                padding: 12px 24px;
                border-radius: 12px;
                font-size: 14px;
            }
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .button-secondary {
            background: #6c757d;
        }
        
        .button-secondary:hover {
            background: #5a6268;
            box-shadow: 0 8px 25px rgba(108, 117, 125, 0.3);
        }
        
        .button-danger {
            background: linear-gradient(135deg, #ff3b30, #dc3545);
        }
        
        .button-danger:hover {
            box-shadow: 0 8px 25px rgba(255, 59, 48, 0.3);
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        @media (min-width: 768px) {
            .card {
                border-radius: 16px;
                padding: 20px;
                margin-bottom: 20px;
            }
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        @media (min-width: 480px) {
            .inventory-grid {
                grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            }
        }
        
        @media (min-width: 768px) {
            .inventory-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 20px;
                margin-top: 20px;
            }
        }
        
        .inventory-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        @media (min-width: 768px) {
            .inventory-item {
                border-radius: 16px;
                padding: 20px;
            }
        }
        
        .inventory-item:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }
        
        .inventory-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        @media (min-width: 768px) {
            .inventory-item-header {
                margin-bottom: 12px;
            }
        }
        
        .inventory-item-title {
            font-weight: 600;
            font-size: 16px;
            color: #1d1d1f;
        }
        
        @media (min-width: 768px) {
            .inventory-item-title {
                font-size: 18px;
            }
        }
        
        .inventory-item-amount {
            font-weight: bold;
            font-size: 20px;
            color: #667eea;
        }
        
        @media (min-width: 768px) {
            .inventory-item-amount {
                font-size: 24px;
            }
        }
        
        .inventory-item-warning {
            color: #ff3b30;
            font-size: 12px;
            margin-top: 6px;
            font-weight: 500;
        }
        
        @media (min-width: 768px) {
            .inventory-item-warning {
                font-size: 14px;
                margin-top: 8px;
            }
        }
        
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-form {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px 20px;
            width: 100%;
            max-width: 350px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }
        
        @media (min-width: 768px) {
            .login-form {
                border-radius: 20px;
                padding: 40px;
                max-width: 400px;
            }
        }
        
        .login-form h2 {
            text-align: center;
            margin-bottom: 25px;
            color: #1d1d1f;
            font-weight: 600;
            font-size: 22px;
        }
        
        @media (min-width: 768px) {
            .login-form h2 {
                margin-bottom: 30px;
            }
        }
        
        .request-item {
            background: white;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 8px;
            border-left: 4px solid #ffc107;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        @media (min-width: 768px) {
            .request-item {
                border-radius: 12px;
                padding: 15px;
                margin-bottom: 10px;
            }
        }
        
        .request-item.approved {
            border-left-color: #28a745;
        }
        
        .request-item.rejected {
            border-left-color: #dc3545;
        }
        
        .status-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: 500;
            text-transform: uppercase;
        }
        
        @media (min-width: 768px) {
            .status-badge {
                padding: 4px 12px;
                border-radius: 20px;
                font-size: 12px;
            }
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background: #d4edda;
            color: #155724;
        }
        
        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }
        
        .notification {
            position: fixed;
            top: 15px;
            right: 15px;
            background: #28a745;
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            animation: slideInRight 0.3s ease;
            font-size: 13px;
            max-width: calc(100% - 30px);
        }
        
        @media (min-width: 768px) {
            .notification {
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 12px;
                font-size: 14px;
                max-width: 300px;
            }
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .upcoming-events {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }
        
        @media (min-width: 768px) {
            .upcoming-events {
                border-radius: 16px;
                padding: 20px;
                margin-bottom: 20px;
            }
        }
        
        .upcoming-events h3 {
            margin-top: 0;
            color: #1d1d1f;
            font-weight: 600;
            font-size: 16px;
        }
        
        @media (min-width: 768px) {
            .upcoming-events h3 {
                font-size: 18px;
            }
        }
        
        .upcoming-event {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
        }
        
        @media (min-width: 768px) {
            .upcoming-event {
                padding: 12px 0;
                gap: 10px;
                font-size: 14px;
            }
        }
        
        .upcoming-event:last-child {
            border-bottom: none;
        }
        
        .event-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        @media (min-width: 768px) {
            .event-indicator {
                width: 12px;
                height: 12px;
            }
        }
        
        .month-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            background: white;
            padding: 12px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        @media (min-width: 768px) {
            .month-navigation {
                margin-bottom: 20px;
                padding: 15px 20px;
                border-radius: 12px;
            }
        }
        
        .month-navigation h2 {
            margin: 0;
            color: #1d1d1f;
            font-weight: 600;
            font-size: 18px;
        }
        
        @media (min-width: 768px) {
            .month-navigation h2 {
                font-size: 20px;
            }
        }
        
        .nav-button {
            background: #667eea;
            color: white;
            border: none;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            min-height: 35px;
        }
        
        @media (min-width: 768px) {
            .nav-button {
                width: 40px;
                height: 40px;
                font-size: 18px;
                min-height: 40px;
            }
        }
        
        .nav-button:hover {
            background: #5a67d8;
            transform: scale(1.1);
        }
        
        .comment-section {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid #e9ecef;
        }
        
        @media (min-width: 768px) {
            .comment-section {
                margin-top: 15px;
                padding-top: 15px;
            }
        }
        
        .comment {
            background: #f8f9fa;
            padding: 8px;
            border-radius: 6px;
            margin-bottom: 6px;
            font-size: 12px;
        }
        
        @media (min-width: 768px) {
            .comment {
                padding: 10px;
                border-radius: 8px;
                margin-bottom: 8px;
                font-size: 13px;
            }
        }
        
        .comment-author {
            font-weight: 600;
            color: #667eea;
        }
        
        .add-comment {
            display: flex;
            gap: 6px;
            margin-top: 8px;
        }
        
        @media (min-width: 768px) {
            .add-comment {
                gap: 8px;
                margin-top: 10px;
            }
        }
        
        .comment-input {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            font-size: 12px;
        }
        
        @media (min-width: 768px) {
            .comment-input {
                padding: 8px;
                border-radius: 6px;
                font-size: 13px;
            }
        }
        
        .comment-btn {
            padding: 6px 10px;
            font-size: 11px;
            min-height: auto;
        }
        
        @media (min-width: 768px) {
            .comment-btn {
                padding: 8px 12px;
                font-size: 12px;
            }
        }
        
        /* Responsive tables */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 15px;
            font-size: 12px;
        }
        
        @media (min-width: 768px) {
            table {
                font-size: 14px;
            }
        }
        
        th, td {
            padding: 8px 10px;
            text-align: left;
            border-bottom: 1px solid #d2d2d7;
        }
        
        @media (min-width: 768px) {
            th, td {
                padding: 12px 15px;
            }
        }
        
        th {
            background-color: #f5f5f7;
            font-weight: 500;
        }
        
        /* Employee chips responsive */
        .employee-chip {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            margin-right: 4px;
            margin-bottom: 4px;
            font-size: 11px;
            line-height: 1.2;
        }
        
        @media (min-width: 768px) {
            .employee-chip {
                padding: 4px 10px;
                border-radius: 15px;
                margin-right: 5px;
                margin-bottom: 5px;
                font-size: 14px;
            }
        }
        
        .chip-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }
        
        .chip-option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            color: #495057;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            user-select: none;
            text-align: center;
            min-width: 60px;
        }
        
        .chip-option:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }
        
        .chip-option.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .chip-option.team-color {
            color: white;
            font-weight: 600;
        }
        
        .chip-option.team-color.selected {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .event-type-selector {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }
        
        .event-type-option {
            flex: 1;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            color: #495057;
            padding: 12px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            user-select: none;
        }
        
        .event-type-option:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }
        
        .event-type-option.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .role-selector {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }
        
        .role-option {
            flex: 1;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            color: #495057;
            padding: 10px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            user-select: none;
        }
        
        .role-option:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }
        
        .role-option.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .operation-type-selector {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }
        
        .operation-type-option {
            flex: 1;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            color: #495057;
            padding: 10px 16px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: center;
            user-select: none;
        }
        
        .operation-type-option:hover {
            background: #e9ecef;
            transform: translateY(-1px);
        }
        
        .operation-type-option.selected {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .operation-type-option.income {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        
        .operation-type-option.income.selected {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border-color: #28a745;
        }
        
        .operation-type-option.expense {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        /* Responsive button groups */
        .button-group {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            align-items: center;
        }
        <!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∏–≥–∞–¥–∞–º–∏ –∏ —Å–∫–ª–∞–¥–æ–º</title>
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #1d1d1f;
            font-size: 14px;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 10px;
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 1200px;
                padding: 20px;
            }
            body {
                font-size: 16px;
            }
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            margin: 0;
            color: #1d1d1f;
            font-size: 28px;
            font-weight: 600;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .logout-btn {
            background: #ff3b30;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            background: #d70015;
            transform: translateY(-2px);
        }
        
        .main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }
        
        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 16px;
            font-weight: 500;
            color: #6c757d;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }
        
        .tab:hover:not(.active) {
            background: #e9ecef;
            color: #495057;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: #e9ecef;
            border-radius: 0 0 12px 12px;
            overflow: hidden;
        }
        
        .calendar-header {
            text-align: center;
            font-weight: 600;
            padding: 15px 10px;
            background: #667eea;
            color: white;
            font-size: 14px;
        }
        
        .calendar-day {
            background: white;
            padding: 12px 8px;
            min-height: 120px;
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
        }
        
        .calendar-day:hover {
            background: #f8f9fa;
            transform: scale(1.02);
        }
        
        .calendar-day.today {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .calendar-day.other-month {
            background: #f8f9fa;
            color: #adb5bd;
        }
        
        .day-number {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 16px;
        }
        
        .event {
            font-size: 11px;
            color: white;
            padding: 3px 6px;
            border-radius: 6px;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
        }
        
        .vacation {
            background: linear-gradient(135deg, #34c759, #28a745);
        }
        
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .toggle {
            position: relative;
            width: 50px;
            height: 26px;
            background: #ccc;
            border-radius: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toggle.active {
            background: #667eea;
        }
        
        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .toggle.active .toggle-slider {
            transform: translateX(24px);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 450px;
            max-width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from { opacity: 0; transform: scale(0.8) translateY(-50px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            box-sizing: border-box;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .button-secondary {
            background: #6c757d;
        }
        
        .button-secondary:hover {
            background: #5a6268;
            box-shadow: 0 8px 25px rgba(108, 117, 125, 0.3);
        }
        
        .button-danger {
            background: linear-gradient(135deg, #ff3b30, #dc3545);
        }
        
        .button-danger:hover {
            box-shadow: 0 8px 25px rgba(255, 59, 48, 0.3);
        }
        
        .card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .inventory-item {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .inventory-item:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
            border-color: #667eea;
        }
        
        .inventory-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .inventory-item-title {
            font-weight: 600;
            font-size: 18px;
            color: #1d1d1f;
        }
        
        .inventory-item-amount {
            font-weight: bold;
            font-size: 24px;
            color: #667eea;
        }
        
        .inventory-item-warning {
            color: #ff3b30;
            font-size: 14px;
            margin-top: 8px;
            font-weight: 500;
        }
        
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-form {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            width: 400px;
            max-width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        }
        
        .login-form h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #1d1d1f;
            font-weight: 600;
        }
        
        .request-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid #ffc107;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .request-item.approved {
            border-left-color: #28a745;
        }
        
        .request-item.rejected {
            border-left-color: #dc3545;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-approved {
            background: #d4edda;
            color: #155724;
        }
        
        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
            z-index: 1001;
            animation: slideInRight 0.3s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .upcoming-events {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }
        
        .upcoming-events h3 {
            margin-top: 0;
            color: #1d1d1f;
            font-weight: 600;
        }
        
        .upcoming-event {
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .upcoming-event:last-child {
            border-bottom: none;
        }
        
        .event-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .month-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .month-navigation h2 {
            margin: 0;
            color: #1d1d1f;
            font-weight: 600;
        }
        
        .nav-button {
            background: #667eea;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .nav-button:hover {
            background: #5a67d8;
            transform: scale(1.1);
        }
        
        .comment-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }
        
        .comment {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .comment-author {
            font-weight: 600;
            color: #667eea;
        }
        
        .add-comment {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        
        .comment-input {
            flex: 1;
            padding: 8px;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            font-size: 13px;
        }
        
        .comment-btn {
            padding: 8px 12px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div id="login-screen" class="login-container">
        <div class="login-form">
            <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
            <div class="form-group">
                <label for="username">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                <input type="text" id="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
            </div>
            <div class="form-group">
                <label for="password">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" id="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            </div>
            <button onclick="login()" style="width: 100%;">–í–æ–π—Ç–∏</button>
            <div style="margin-top: 15px; text-align: center; font-size: 12px; color: #6c757d;">
                –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:<br>
                –£–ø—Ä–∞–≤–ª—è—é—â–∏–π: admin / admin<br>
                –°–æ—Ç—Ä—É–¥–Ω–∏–∫: employee / employee
            </div>
        </div>
    </div>

    <div id="main-app" style="display: none;">
        <div class="container">
            <div class="header">
                <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∏–≥–∞–¥–∞–º–∏ –∏ —Å–∫–ª–∞–¥–æ–º</h1>
                <div class="user-info">
                    <div class="user-badge" id="user-badge"></div>
                    <button class="logout-btn" onclick="logout()">–í—ã—Ö–æ–¥</button>
                </div>
            </div>
            
            <div class="upcoming-events" id="upcoming-events">
                <h3>–ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
                <div id="upcoming-events-list"></div>
            </div>
            
            <div class="main-content">
                <div class="tabs" id="main-tabs">
                    <button class="tab active" onclick="switchTab('calendar')">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</button>
                    <button class="tab" onclick="switchTab('teams')" id="teams-tab">üë• –ë—Ä–∏–≥–∞–¥—ã</button>
                    <button class="tab" onclick="switchTab('inventory')">üì¶ –°–∫–ª–∞–¥</button>
                    <button class="tab" onclick="switchTab('requests')" id="requests-tab">üìã –ó–∞—è–≤–∫–∏</button>
                </div>
                
                <div id="calendar" class="tab-content active">
                    <div class="toggle-container">
                        <label>–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–ø—É—Å–∫–∞:</label>
                        <div class="toggle" id="vacation-toggle" onclick="toggleVacations()">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    
                    <div class="month-navigation">
                        <button class="nav-button" onclick="prevMonth()">‚Äπ</button>
                        <h2 id="current-month">–ú–∞–π 2023</h2>
                        <button class="nav-button" onclick="nextMonth()">‚Ä∫</button>
                    </div>
                    
                    <div class="calendar">
                        <div class="calendar-header">–ü–Ω</div>
                        <div class="calendar-header">–í—Ç</div>
                        <div class="calendar-header">–°—Ä</div>
                        <div class="calendar-header">–ß—Ç</div>
                        <div class="calendar-header">–ü—Ç</div>
                        <div class="calendar-header">–°–±</div>
                        <div class="calendar-header">–í—Å</div>
                    </div>
                    
                    <div class="calendar-grid" id="calendar-days"></div>
                    
                    <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button onclick="openEventModal(null)" id="add-event-btn">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
                        <button onclick="openVacationRequestModal()" id="request-vacation-btn" style="display: none;">–ó–∞–ø—Ä–æ—Å–∏—Ç—å –æ—Ç–ø—É—Å–∫</button>
                    </div>
                </div>
                
                <div id="teams" class="tab-content">
                    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∏–≥–∞–¥–∞–º–∏</h2>
                    <button onclick="openTeamModal()" style="margin-bottom: 20px;">–î–æ–±–∞–≤–∏—Ç—å –±—Ä–∏–≥–∞–¥—É</button>
                    <div id="teams-list"></div>
                    
                    <h2 style="margin-top: 30px;">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h2>
                    <button onclick="openEmployeeModal()" style="margin-bottom: 20px;">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</button>
                    <div id="employees-list"></div>
                </div>
                
                <div id="inventory" class="tab-content">
                    <h2>–£—á–µ—Ç —Å–∫–ª–∞–¥–∞</h2>
                    <div class="inventory-grid" id="inventory-grid"></div>
                </div>
                
                <div id="requests" class="tab-content">
                    <h2>–ó–∞—è–≤–∫–∏</h2>
                    <div id="requests-list"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div id="event-modal" class="modal">
        <div class="modal-content">
            <h2 id="event-modal-title">–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h2>
            
            <div class="form-group">
                <label>–¢–∏–ø —Å–æ–±—ã—Ç–∏—è</label>
                <div class="event-type-selector">
                    <div class="event-type-option selected" onclick="selectEventType('team')">
                        üöõ –ó–∞–µ–∑–¥ –±—Ä–∏–≥–∞–¥—ã
                    </div>
                    <div class="event-type-option" onclick="selectEventType('vacation')">
                        üèñÔ∏è –û—Ç–ø—É—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
                    </div>
                </div>
                <input type="hidden" id="event-type" value="team">
            </div>
            
            <div id="team-fields">
                <div class="form-group">
                    <label for="event-address">–ê–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞</label>
                    <input type="text" id="event-address" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞">
                </div>
                
                <div class="form-group">
                    <label>–ë—Ä–∏–≥–∞–¥–∞</label>
                    <div class="chip-selector" id="team-chips"></div>
                    <input type="hidden" id="event-team">
                </div>
                
                <div class="form-group">
                    <label for="event-equipment">–ß—Ç–æ –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π</label>
                    <textarea id="event-equipment" placeholder="–£–∫–∞–∂–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã"></textarea>
                </div>
            </div>
            
            <div id="vacation-fields" style="display: none;">
                <div class="form-group">
                    <label>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</label>
                    <div class="chip-selector" id="employee-chips"></div>
                    <input type="hidden" id="event-employee">
                </div>
                
                <div class="form-group">
                    <label for="event-start-date">–ù–∞—á–∞–ª–æ –æ—Ç–ø—É—Å–∫–∞</label>
                    <input type="date" id="event-start-date">
                </div>
                
                <div class="form-group">
                    <label for="event-end-date">–ö–æ–Ω–µ—Ü –æ—Ç–ø—É—Å–∫–∞</label>
                    <input type="date" id="event-end-date">
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; flex-wrap: wrap;">
                <button class="button-secondary" onclick="closeModal('event-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="saveEvent()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <div id="vacation-request-modal" class="modal">
        <div class="modal-content">
            <h2>–ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—É—Å–∫</h2>
            
            <div class="form-group">
                <label for="vacation-start-date">–ù–∞—á–∞–ª–æ –æ—Ç–ø—É—Å–∫–∞</label>
                <input type="date" id="vacation-start-date">
            </div>
            
            <div class="form-group">
                <label for="vacation-end-date">–ö–æ–Ω–µ—Ü –æ—Ç–ø—É—Å–∫–∞</label>
                <input type="date" id="vacation-end-date">
            </div>
            
            <div class="form-group">
                <label for="vacation-reason">–ü—Ä–∏—á–∏–Ω–∞</label>
                <textarea id="vacation-reason" placeholder="–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ç–ø—É—Å–∫–∞"></textarea>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                <button class="button-secondary" onclick="closeModal('vacation-request-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="submitVacationRequest()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
            </div>
        </div>
    </div>
    
    <div id="inventory-request-modal" class="modal">
        <div class="modal-content">
            <h2 id="inventory-request-title">–ó–∞–ø—Ä–æ—Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</h2>
            
            <div class="form-group">
                <label for="request-amount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                <input type="number" id="request-amount" min="1">
            </div>
            
            <div class="form-group">
                <label for="request-reason">–ü—Ä–∏—á–∏–Ω–∞</label>
                <textarea id="request-reason" placeholder="–£–∫–∞–∂–∏—Ç–µ –¥–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã –º–∞—Ç–µ—Ä–∏–∞–ª—ã"></textarea>
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                <button class="button-secondary" onclick="closeModal('inventory-request-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="submitInventoryRequest()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
            </div>
        </div>
    </div>
    
    <div id="event-details-modal" class="modal">
        <div class="modal-content">
            <h2 id="event-details-title">–î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è</h2>
            <div id="event-details-content"></div>
            
            <div class="comment-section" id="comment-section">
                <h4>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4>
                <div id="comments-list"></div>
                <div class="add-comment">
                    <input type="text" id="new-comment" class="comment-input" placeholder="–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...">
                    <button class="comment-btn" onclick="addComment()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                <button onclick="closeModal('event-details-modal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (team-modal, employee-modal –∏ —Ç.–¥.) - –¥–æ–±–∞–≤–ª—é –≤ —Å–ª–µ–¥—É—é—â–µ–π —á–∞—Å—Ç–∏ -->
    <div id="team-modal" class="modal">
        <div class="modal-content">
            <h2>–î–æ–±–∞–≤–∏—Ç—å –±—Ä–∏–≥–∞–¥—É</h2>
            
            <div class="form-group">
                <label for="team-name">–ù–∞–∑–≤–∞–Ω–∏–µ –±—Ä–∏–≥–∞–¥—ã</label>
                <input type="text" id="team-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±—Ä–∏–≥–∞–¥—ã">
            </div>
            
            <div class="form-group">
                <label>–¶–≤–µ—Ç –±—Ä–∏–≥–∞–¥—ã</label>
                <div class="chip-selector" id="color-chips">
                    <div class="chip-option team-color selected" style="background-color: #667eea; border-color: #667eea;" onclick="selectTeamColor('#667eea')">–°–∏–Ω–∏–π</div>
                    <div class="chip-option team-color" style="background-color: #34c759; border-color: #34c759;" onclick="selectTeamColor('#34c759')">–ó–µ–ª–µ–Ω—ã–π</div>
                    <div class="chip-option team-color" style="background-color: #ff9500; border-color: #ff9500;" onclick="selectTeamColor('#ff9500')">–û—Ä–∞–Ω–∂–µ–≤—ã–π</div>
                    <div class="chip-option team-color" style="background-color: #ff2d55; border-color: #ff2d55;" onclick="selectTeamColor('#ff2d55')">–ö—Ä–∞—Å–Ω—ã–π</div>
                    <div class="chip-option team-color" style="background-color: #5856d6; border-color: #5856d6;" onclick="selectTeamColor('#5856d6')">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π</div>
                </div>
                <input type="hidden" id="team-color" value="#667eea">
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                <button class="button-secondary" onclick="closeModal('team-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="saveTeam()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>-option selected" style="width: 30px; height: 30px; border-radius: 50%; background-color: #667eea; cursor: pointer; border: 3px solid transparent;" onclick="selectColor('#667eea')"></div>
                    <div class="color-option" style="width: 30px; height: 30px; border-radius: 50%; background-color: #34c759; cursor: pointer; border: 3px solid transparent;" onclick="selectColor('#34c759')"></div>
                    <div class="color-option" style="width: 30px; height: 30px; border-radius: 50%; background-color: #ff9500; cursor: pointer; border: 3px solid transparent;" onclick="selectColor('#ff9500')"></div>
                    <div class="color-option" style="width: 30px; height: 30px; border-radius: 50%; background-color: #ff2d55; cursor: pointer; border: 3px solid transparent;" onclick="selectColor('#ff2d55')"></div>
                    <div class="color-option" style="width: 30px; height: 30px; border-radius: 50%; background-color: #5856d6; cursor: pointer; border: 3px solid transparent;" onclick="selectColor('#5856d6')"></div>
                </div>
                <input type="hidden" id="team-color" value="#667eea">
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                <button class="button-secondary" onclick="closeModal('team-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="saveTeam()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <div id="employee-modal" class="modal">
        <div class="modal-content">
            <h2>–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</h2>
            
            <div class="form-group">
                <label for="employee-name">–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</label>
                <input type="text" id="employee-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ–ª–Ω–æ–µ –∏–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞">
            </div>
            
            <div class="form-group">
                <label>–†–æ–ª—å</label>
                <div class="role-selector">
                    <div class="role-option selected" onclick="selectRole('employee')">
                        üë§ –°–æ—Ç—Ä—É–¥–Ω–∏–∫
                    </div>
                    <div class="role-option" onclick="selectRole('manager')">
                        üëî –£–ø—Ä–∞–≤–ª—è—é—â–∏–π
                    </div>
                </div>
                <input type="hidden" id="employee-role" value="employee">
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                <button class="button-secondary" onclick="closeModal('employee-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="saveEmployee()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <div id="inventory-operation-modal" class="modal">
        <div class="modal-content">
            <h2 id="inventory-operation-title">–û–ø–µ—Ä–∞—Ü–∏—è</h2>
            
            <div class="form-group">
                <label>–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏</label>
                <div class="operation-type-selector">
                    <div class="operation-type-option income selected" onclick="selectOperationType('in')">
                        üìà –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ
                    </div>
                    <div class="operation-type-option expense" onclick="selectOperationType('out')">
                        üìâ –†–∞—Å—Ö–æ–¥
                    </div>
                </div>
                <input type="hidden" id="inventory-operation-type" value="in">
            </div>
            
            <div class="form-group">
                <label for="inventory-operation-date">–î–∞—Ç–∞</label>
                <input type="date" id="inventory-operation-date">
            </div>
            
            <div class="form-group">
                <label for="inventory-operation-amount">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
                <input type="number" id="inventory-operation-amount" min="1" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ">
            </div>
            
            <div class="form-group">
                <label for="inventory-operation-notes">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
                <input type="text" id="inventory-operation-notes" placeholder="–£–∫–∞–∂–∏—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é">
            </div>
            
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                <button class="button-secondary" onclick="closeModal('inventory-operation-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button onclick="saveInventoryOperation()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>
    
    <div id="inventory-history-modal" class="modal">
        <div class="modal-content">
            <h2 id="inventory-history-title">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h2>
            
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h3>–¢–µ–∫—É—â–∏–π –æ—Å—Ç–∞—Ç–æ–∫: <span id="inventory-current-amount">0</span></h3>
                <button onclick="openInventoryOperationModal()" id="add-operation-btn">–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</button>
            </div>
            
            <table style="width: 100%; border-collapse: collapse; background-color: white; border-radius: 8px; overflow: hidden; margin-top: 15px;">
                <thead>
                    <tr>
                        <th style="padding: 12px 15px; text-align: left; border-bottom: 1px solid #d2d2d7; background-color: #f5f5f7; font-weight: 500;">–î–∞—Ç–∞</th>
                        <th style="padding: 12px 15px; text-align: left; border-bottom: 1px solid #d2d2d7; background-color: #f5f5f7; font-weight: 500;">–¢–∏–ø</th>
                        <th style="padding: 12px 15px; text-align: left; border-bottom: 1px solid #d2d2d7; background-color: #f5f5f7; font-weight: 500;">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        <th style="padding: 12px 15px; text-align: left; border-bottom: 1px solid #d2d2d7; background-color: #f5f5f7; font-weight: 500;">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</th>
                    </tr>
                </thead>
                <tbody id="inventory-history-table"></tbody>
            </table>
            
            <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
                <button onclick="closeModal('inventory-history-modal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>
    </div>
    
    <script>
        // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
        const users = {
            'admin': { password: 'admin', role: 'manager', name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' },
            'employee': { password: 'employee', role: 'employee', name: '–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ò–≤–∞–Ω–æ–≤' }
        };
        
        // –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        let currentUser = null;
        let showVacations = true;
        
        // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let currentDate = new Date();
        let selectedDate = null;
        let selectedInventoryItem = null;
        let selectedTeamColor = "#667eea";
        let selectedEventForDetails = null;
        
        let teams = [
            { id: 1, name: "–ë—Ä–∏–≥–∞–¥–∞ 1", color: "#667eea" },
            { id: 2, name: "–ë—Ä–∏–≥–∞–¥–∞ 2", color: "#34c759" }
        ];
        
        let employees = [
            { id: 1, name: "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω", teamId: 1, role: 'employee' },
            { id: 2, name: "–ü–µ—Ç—Ä–æ–≤ –ü–µ—Ç—Ä", teamId: 1, role: 'employee' },
            { id: 3, name: "–°–∏–¥–æ—Ä–æ–≤ –ê–ª–µ–∫—Å–µ–π", teamId: 2, role: 'employee' },
            { id: 4, name: "–ö—É–∑–Ω–µ—Ü–æ–≤–∞ –ê–Ω–Ω–∞", teamId: null, role: 'employee' }
        ];
        
        let events = [
            { 
                id: 1, 
                type: "team", 
                date: formatDate(new Date()), 
                address: "—É–ª. –°—Ç—Ä–æ–∏—Ç–µ–ª–µ–π, 15", 
                teamId: 1, 
                equipment: "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –º–∞—Ç–µ—Ä–∏–∞–ª—ã",
                comments: []
            },
            { 
                id: 2, 
                type: "vacation", 
                startDate: formatDate(new Date()), 
                endDate: formatDate(new Date(new Date().setDate(new Date().getDate() + 7))), 
                employeeId: 4,
                comments: []
            }
        ];
        
        const pipeTypes = [
            { id: 1, name: "–ü–ù–î 125–º–º", minStock: 50 },
            { id: 2, name: "–ú–µ—Ç–∞–ª–ª 133–º–º", minStock: 30 },
            { id: 3, name: "–ü–ù–î 117–º–º", minStock: 40 },
            { id: 4, name: "–Ω–ü–í–• 90–º–º", minStock: 60 },
            { id: 5, name: "–ü–ù–î 32–º–º", minStock: 100 }
        ];
        
        let inventoryOperations = [
            { id: 1, itemId: 1, date: formatDate(new Date()), type: "in", amount: 100, notes: "–ü–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç –∑–∞–≤–æ–¥–∞" },
            { id: 2, itemId: 1, date: formatDate(new Date()), type: "out", amount: 30, notes: "–ë—Ä–∏–≥–∞–¥–∞ 1" },
            { id: 3, itemId: 2, date: formatDate(new Date()), type: "in", amount: 50, notes: "–ü–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç –∑–∞–≤–æ–¥–∞" },
            { id: 4, itemId: 3, date: formatDate(new Date()), type: "in", amount: 80, notes: "–ü–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç –∑–∞–≤–æ–¥–∞" },
            { id: 5, itemId: 4, date: formatDate(new Date()), type: "in", amount: 70, notes: "–ü–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç –∑–∞–≤–æ–¥–∞" },
            { id: 6, itemId: 5, date: formatDate(new Date()), type: "in", amount: 150, notes: "–ü–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç –∑–∞–≤–æ–¥–∞" }
        ];
        
        let requests = [
            {
                id: 1,
                type: 'vacation',
                userId: 'employee',
                userName: '–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ò–≤–∞–Ω–æ–≤',
                startDate: '2024-07-15',
                endDate: '2024-07-22',
                reason: '–°–µ–º–µ–π–Ω—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞',
                status: 'pending',
                createdAt: formatDate(new Date())
            }
        ];
        
        // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            if (users[username] && users[username].password === password) {
                currentUser = {
                    username: username,
                    ...users[username]
                };
                
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                
                initializeApp();
                showNotification('–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!');
            } else {
                showNotification('–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞', 'error');
            }
        }
        
        function logout() {
            currentUser = null;
            document.getElementById('login-screen').style.display = 'flex';
            document.getElementById('main-app').style.display = 'none';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
        }
        
        function initializeApp() {
            document.getElementById('user-badge').textContent = 
                `${currentUser.name} (${currentUser.role === 'manager' ? '–£–ø—Ä–∞–≤–ª—è—é—â–∏–π' : '–°–æ—Ç—Ä—É–¥–Ω–∏–∫'})`;
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏
            if (currentUser.role === 'employee') {
                document.getElementById('teams-tab').style.display = 'none';
                document.getElementById('add-event-btn').style.display = 'none';
                document.getElementById('request-vacation-btn').style.display = 'inline-block';
            } else {
                document.getElementById('teams-tab').style.display = 'block';
                document.getElementById('add-event-btn').style.display = 'inline-block';
                document.getElementById('request-vacation-btn').style.display = 'none';
            }
            
            renderCalendar();
            renderUpcomingEvents();
            if (currentUser.role === 'manager') {
                renderTeams();
                renderEmployees();
                renderRequests();
            }
            renderInventoryGrid();
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            if (type === 'error') {
                notification.style.background = '#ff3b30';
            }
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function formatDate(date) {
            const d = new Date(date);
            let month = '' + (d.getMonth() + 1);
            let day = '' + d.getDate();
            const year = d.getFullYear();
            
            if (month.length < 2) month = '0' + month;
            if (day.length < 2) day = '0' + day;
            
            return [year, month, day].join('-');
        }
        
        function getMonthName(date) {
            const months = [
                "–Ø–Ω–≤–∞—Ä—å", "–§–µ–≤—Ä–∞–ª—å", "–ú–∞—Ä—Ç", "–ê–ø—Ä–µ–ª—å", "–ú–∞–π", "–ò—é–Ω—å",
                "–ò—é–ª—å", "–ê–≤–≥—É—Å—Ç", "–°–µ–Ω—Ç—è–±—Ä—å", "–û–∫—Ç—è–±—Ä—å", "–ù–æ—è–±—Ä—å", "–î–µ–∫–∞–±—Ä—å"
            ];
            return months[date.getMonth()] + " " + date.getFullYear();
        }
        
        function getDaysInMonth(year, month) {
            return new Date(year, month + 1, 0).getDate();
        }
        
        function getFirstDayOfMonth(year, month) {
            const day = new Date(year, month, 1).getDay();
            return day === 0 ? 6 : day - 1;
        }
        
        function getTeamName(id) {
            const team = teams.find(t => t.id === id);
            return team ? team.name : "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –±—Ä–∏–≥–∞–¥–∞";
        }
        
        function getTeamColor(id) {
            const team = teams.find(t => t.id === id);
            return team ? team.color : "#667eea";
        }
        
        function getEmployeeName(id) {
            const employee = employees.find(e => e.id === id);
            return employee ? employee.name : "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫";
        }
        
        function getPipeTypeName(id) {
            const type = pipeTypes.find(t => t.id === id);
            return type ? type.name : "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø";
        }
        
        function getPipeTypeMinStock(id) {
            const type = pipeTypes.find(t => t.id === id);
            return type ? type.minStock : 0;
        }
        
        function calculateCurrentAmount(itemId) {
            return inventoryOperations
                .filter(op => op.itemId === itemId)
                .reduce((sum, op) => op.type === "in" ? sum + op.amount : sum - op.amount, 0);
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function switchTab(tabId) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
            
            if (tabId === 'calendar') {
                renderCalendar();
            } else if (tabId === 'teams') {
                renderTeams();
                renderEmployees();
            } else if (tabId === 'inventory') {
                renderInventoryGrid();
            } else if (tabId === 'requests') {
                renderRequests();
            }
        }
        
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        function toggleVacations() {
            showVacations = !showVacations;
            const toggle = document.getElementById('vacation-toggle');
            toggle.classList.toggle('active');
            renderCalendar();
        }
        
        // –ö–∞–ª–µ–Ω–¥–∞—Ä—å
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const daysInMonth = getDaysInMonth(year, month);
            const firstDay = getFirstDayOfMonth(year, month);
            
            document.getElementById('current-month').textContent = getMonthName(currentDate);
            
            let calendarDays = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –¥–ª—è –≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è –º–µ—Å—è—Ü–∞
            for (let i = 0; i < firstDay; i++) {
                calendarDays += `
                    <div class="calendar-day other-month">
                        <div class="day-number"></div>
                        <div class="events-container"></div>
                    </div>
                `;
            }
            
            // –î–Ω–∏ —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
            const today = formatDate(new Date());
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const formattedDate = formatDate(date);
                const dayEvents = events.filter(e => {
                    if (e.type === 'team') {
                        return e.date === formattedDate;
                    } else if (e.type === 'vacation' && showVacations) {
                        return e.startDate <= formattedDate && e.endDate >= formattedDate;
                    }
                    return false;
                });
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞
                const maxEvents = window.innerWidth < 480 ? 3 : window.innerWidth < 768 ? 4 : 6;
                const visibleEvents = dayEvents.slice(0, maxEvents);
                const hiddenCount = dayEvents.length - visibleEvents.length;
                
                let eventsHtml = '';
                visibleEvents.forEach(event => {
                    if (event.type === 'team') {
                        const teamColor = getTeamColor(event.teamId);
                        const teamName = getTeamName(event.teamId);
                        const shortName = teamName.length > 8 ? teamName.substring(0, 8) + '...' : teamName;
                        eventsHtml += `
                            <div class="event" style="background: linear-gradient(135deg, ${teamColor}, ${teamColor}dd);" onclick="openEventDetails(${event.id}); event.stopPropagation();" title="${teamName} - ${event.address}">
                                ${shortName}
                            </div>
                        `;
                    } else if (event.type === 'vacation') {
                        const employeeName = getEmployeeName(event.employeeId);
                        const shortName = employeeName.split(' ')[0]; // –¢–æ–ª—å–∫–æ –∏–º—è
                        eventsHtml += `
                            <div class="event vacation" onclick="openEventDetails(${event.id}); event.stopPropagation();" title="${employeeName} - –æ—Ç–ø—É—Å–∫">
                                ${shortName}
                            </div>
                        `;
                    }
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "–µ—â–µ X" –µ—Å–ª–∏ –µ—Å—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Å–æ–±—ã—Ç–∏—è
                if (hiddenCount > 0) {
                    eventsHtml += `
                        <div class="event-more" onclick="showAllEvents('${formattedDate}'); event.stopPropagation();" title="–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è">
                            +${hiddenCount}
                        </div>
                    `;
                }
                
                const isToday = formattedDate === today;
                const clickHandler = currentUser.role === 'manager' ? `openEventModal('${formattedDate}')` : '';
                
                calendarDays += `
                    <div class="calendar-day ${isToday ? 'today' : ''}" onclick="${clickHandler}">
                        <div class="day-number">${day}</div>
                        <div class="events-container">${eventsHtml}</div>
                    </div>
                `;
            }
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —è—á–µ–π–∫–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π —Å–µ—Ç–∫–∏ 6 –Ω–µ–¥–µ–ª—å (42 —è—á–µ–π–∫–∏)
            const totalCells = firstDay + daysInMonth;
            const remainingCells = 42 - totalCells;
            for (let day = 1; day <= remainingCells; day++) {
                calendarDays += `
                    <div class="calendar-day other-month">
                        <div class="day-number"></div>
                        <div class="events-container"></div>
                    </div>
                `;
            }
            
            document.getElementById('calendar-days').innerHTML = calendarDays;
            renderUpcomingEvents();
        }
        
        function renderUpcomingEvents() {
            const upcoming = getUpcomingEvents();
            let html = '';
            
            if (upcoming.length === 0) {
                html = '<div>–ù–µ—Ç –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π</div>';
            } else {
                upcoming.forEach(day => {
                    html += `<div style="margin-bottom: 10px;"><strong>${day.date}:</strong></div>`;
                    day.events.forEach(event => {
                        if (event.type === 'team') {
                            const teamColor = getTeamColor(event.teamId);
                            html += `
                                <div class="upcoming-event">
                                    <div class="event-indicator" style="background-color: ${teamColor};"></div>
                                    <span>${getTeamName(event.teamId)} - ${event.address}</span>
                                </div>
                            `;
                        } else if (showVacations) {
                            html += `
                                <div class="upcoming-event">
                                    <div class="event-indicator" style="background-color: #34c759;"></div>
                                    <span>${getEmployeeName(event.employeeId)} - –æ—Ç–ø—É—Å–∫</span>
                                </div>
                            `;
                        }
                    });
                });
            }
            
            document.getElementById('upcoming-events-list').innerHTML = html;
        }
        
        function getUpcomingEvents() {
            const today = new Date();
            const upcoming = [];
            
            for (let i = 0; i < 3; i++) {
                const checkDate = new Date(today);
                checkDate.setDate(today.getDate() + i);
                const formattedDate = formatDate(checkDate);
                
                const dayEvents = events.filter(e => 
                    (e.type === 'team' && e.date === formattedDate) || 
                    (e.type === 'vacation' && showVacations && e.startDate <= formattedDate && e.endDate >= formattedDate)
                );
                
                if (dayEvents.length > 0) {
                    const dateLabel = i === 0 ? '–°–µ–≥–æ–¥–Ω—è' : i === 1 ? '–ó–∞–≤—Ç—Ä–∞' : '–ü–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞';
                    upcoming.push({
                        date: dateLabel,
                        events: dayEvents
                    });
                }
            }
            
            return upcoming;
        }
        
        function prevMonth() {
            currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1);
            renderCalendar();
        }
        
        function nextMonth() {
            currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1);
            renderCalendar();
        }
        
        // –°–æ–±—ã—Ç–∏—è
        function changeEventType() {
            const type = document.getElementById('event-type').value;
            document.getElementById('team-fields').style.display = type === 'team' ? 'block' : 'none';
            document.getElementById('vacation-fields').style.display = type === 'vacation' ? 'block' : 'none';
        }
        
        function openEventModal(date) {
            selectedDate = date || formatDate(new Date());
            
            document.getElementById('event-modal-title').textContent = date ? 
                `–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –Ω–∞ ${date.split('-').reverse().join('.')}` : 
                '–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É
            document.getElementById('event-address').value = '';
            document.getElementById('event-equipment').value = '';
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            document.querySelectorAll('.event-type-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector('.event-type-option').classList.add('selected');
            document.getElementById('event-type').value = 'team';
            
            // –†–µ–Ω–¥–µ—Ä–∏–º –ø–ª–∞—à–∫–∏
            renderTeamChips();
            renderEmployeeChips();
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞—Ç—ã
            if (date) {
                document.getElementById('event-start-date').value = date;
                document.getElementById('event-end-date').value = date;
            } else {
                const today = formatDate(new Date());
                document.getElementById('event-start-date').value = today;
                document.getElementById('event-end-date').value = today;
            }
            
            changeEventType();
            openModal('event-modal');
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏-–ø–ª–∞—à–∫–∞–º–∏
        function selectEventType(type) {
            document.querySelectorAll('.event-type-option').forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
            document.getElementById('event-type').value = type;
            changeEventType();
        }
        
        function selectTeam(teamId) {
            document.querySelectorAll('#team-chips .chip-option').forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
            document.getElementById('event-team').value = teamId;
        }
        
        function selectEmployee(employeeId) {
            document.querySelectorAll('#employee-chips .chip-option').forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
            document.getElementById('event-employee').value = employeeId;
        }
        
        function selectRole(role) {
            document.querySelectorAll('.role-option').forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
            document.getElementById('employee-role').value = role;
        }
        
        function selectOperationType(type) {
            document.querySelectorAll('.operation-type-option').forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
            document.getElementById('inventory-operation-type').value = type;
        }
        
        function renderTeamChips() {
            const container = document.getElementById('team-chips');
            let html = '';
            
            teams.forEach(team => {
                html += `
                    <div class="chip-option team-color" style="background-color: ${team.color}; border-color: ${team.color};" onclick="selectTeam(${team.id})">
                        ${team.name}
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—É—é –±—Ä–∏–≥–∞–¥—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            if (teams.length > 0) {
                setTimeout(() => {
                    const firstChip = container.querySelector('.chip-option');
                    if (firstChip) {
                        firstChip.classList.add('selected');
                        document.getElementById('event-team').value = teams[0].id;
                    }
                }, 10);
            }
        }
        
        function renderEmployeeChips() {
            const container = document.getElementById('employee-chips');
            let html = '';
            
            employees.forEach(employee => {
                html += `
                    <div class="chip-option" onclick="selectEmployee(${employee.id})">
                        ${employee.name}
                    </div>
                `;
            });
            
            container.innerHTML = html;
            
            // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            if (employees.length > 0) {
                setTimeout(() => {
                    const firstChip = container.querySelector('.chip-option');
                    if (firstChip) {
                        firstChip.classList.add('selected');
                        document.getElementById('event-employee').value = employees[0].id;
                    }
                }, 10);
            }
        }
        
        function saveEvent() {
            const type = document.getElementById('event-type').value;
            
            if (type === 'team') {
                const address = document.getElementById('event-address').value.trim();
                const teamId = parseInt(document.getElementById('event-team').value);
                const equipment = document.getElementById('event-equipment').value.trim();
                
                if (!address || !teamId || !equipment) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                    return;
                }
                
                const newEvent = {
                    id: Date.now(),
                    type: 'team',
                    date: selectedDate,
                    address: address,
                    teamId: teamId,
                    equipment: equipment,
                    comments: []
                };
                events.push(newEvent);
            } else {
                const startDate = document.getElementById('event-start-date').value;
                const endDate = document.getElementById('event-end-date').value;
                const employeeId = parseInt(document.getElementById('event-employee').value);
                
                if (!startDate || !endDate || !employeeId) {
                    showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                    return;
                }
                
                const newEvent = {
                    id: Date.now(),
                    type: 'vacation',
                    startDate: startDate,
                    endDate: endDate,
                    employeeId: employeeId,
                    comments: []
                };
                events.push(newEvent);
            }
            
            closeModal('event-modal');
            renderCalendar();
            showNotification('–°–æ–±—ã—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ');
        }
        
        function openEventDetails(eventId) {
            selectedEventForDetails = events.find(e => e.id === eventId);
            if (!selectedEventForDetails) return;
            
            let content = '';
            if (selectedEventForDetails.type === 'team') {
                content = `
                    <p><strong>–¢–∏–ø:</strong> –ó–∞–µ–∑–¥ –±—Ä–∏–≥–∞–¥—ã</p>
                    <p><strong>–î–∞—Ç–∞:</strong> ${selectedEventForDetails.date.split('-').reverse().join('.')}</p>
                    <p><strong>–ë—Ä–∏–≥–∞–¥–∞:</strong> ${getTeamName(selectedEventForDetails.teamId)}</p>
                    <p><strong>–ê–¥—Ä–µ—Å:</strong> ${selectedEventForDetails.address}</p>
                    <p><strong>–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ:</strong> ${selectedEventForDetails.equipment}</p>
                `;
            } else {
                content = `
                    <p><strong>–¢–∏–ø:</strong> –û—Ç–ø—É—Å–∫</p>
                    <p><strong>–°–æ—Ç—Ä—É–¥–Ω–∏–∫:</strong> ${getEmployeeName(selectedEventForDetails.employeeId)}</p>
                    <p><strong>–ü–µ—Ä–∏–æ–¥:</strong> ${selectedEventForDetails.startDate.split('-').reverse().join('.')} - ${selectedEventForDetails.endDate.split('-').reverse().join('.')}</p>
                `;
            }
            
            document.getElementById('event-details-title').textContent = '–î–µ—Ç–∞–ª–∏ —Å–æ–±—ã—Ç–∏—è';
            document.getElementById('event-details-content').innerHTML = content;
            document.getElementById('comment-section').style.display = 'block';
            
            renderComments();
            openModal('event-details-modal');
        }
        
        function addComment() {
            const commentText = document.getElementById('new-comment').value.trim();
            if (!commentText || !selectedEventForDetails) return;
            
            if (!selectedEventForDetails.comments) {
                selectedEventForDetails.comments = [];
            }
            
            selectedEventForDetails.comments.push({
                author: currentUser.name,
                text: commentText,
                date: formatDate(new Date())
            });
            
            document.getElementById('new-comment').value = '';
            renderComments();
            showNotification('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω');
        }
        
        function renderComments() {
            if (!selectedEventForDetails) return;
            
            const commentsList = document.getElementById('comments-list');
            let html = '';
            
            if (selectedEventForDetails.comments && selectedEventForDetails.comments.length > 0) {
                selectedEventForDetails.comments.forEach(comment => {
                    html += `
                        <div class="comment">
                            <span class="comment-author">${comment.author}:</span>
                            <span>${comment.text}</span>
                            <div style="font-size: 11px; color: #6c757d; margin-top: 4px;">${comment.date}</div>
                        </div>
                    `;
                });
            } else {
                html = '<div style="color: #6c757d; font-style: italic;">–ù–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</div>';
            }
            
            commentsList.innerHTML = html;
        }
        
        function showAllEvents(date) {
            const dayEvents = events.filter(e => {
                if (e.type === 'team') {
                    return e.date === date;
                } else if (e.type === 'vacation' && showVacations) {
                    return e.startDate <= date && e.endDate >= date;
                }
                return false;
            });
            
            if (dayEvents.length === 0) return;
            
            let content = `<h3>–°–æ–±—ã—Ç–∏—è –Ω–∞ ${date.split('-').reverse().join('.')}</h3>`;
            
            dayEvents.forEach(event => {
                if (event.type === 'team') {
                    const teamColor = getTeamColor(event.teamId);
                    content += `
                        <div style="display: flex; align-items: center; padding: 8px; margin: 8px 0; background: ${teamColor}20; border-left: 4px solid ${teamColor}; border-radius: 6px; cursor: pointer;" onclick="openEventDetails(${event.id})">
                            <div style="width: 12px; height: 12px; border-radius: 50%; background: ${teamColor}; margin-right: 10px;"></div>
                            <div>
                                <div style="font-weight: 600;">${getTeamName(event.teamId)}</div>
                                <div style="font-size: 13px; color: #666;">${event.address}</div>
                            </div>
                        </div>
                    `;
                } else if (event.type === 'vacation') {
                    content += `
                        <div style="display: flex; align-items: center; padding: 8px; margin: 8px 0; background: #34c75920; border-left: 4px solid #34c759; border-radius: 6px; cursor: pointer;" onclick="openEventDetails(${event.id})">
                            <div style="width: 12px; height: 12px; border-radius: 50%; background: #34c759; margin-right: 10px;"></div>
                            <div>
                                <div style="font-weight: 600;">${getEmployeeName(event.employeeId)}</div>
                                <div style="font-size: 13px; color: #666;">–û—Ç–ø—É—Å–∫</div>
                            </div>
                        </div>
                    `;
                }
            });
            
            document.getElementById('event-details-title').textContent = '–°–æ–±—ã—Ç–∏—è –¥–Ω—è';
            document.getElementById('event-details-content').innerHTML = content;
            document.getElementById('comment-section').style.display = 'none';
            openModal('event-details-modal');
        }
        
        // –ó–∞—è–≤–∫–∏ –Ω–∞ –æ—Ç–ø—É—Å–∫
        function openVacationRequestModal() {
            document.getElementById('vacation-start-date').value = '';
            document.getElementById('vacation-end-date').value = '';
            document.getElementById('vacation-reason').value = '';
            openModal('vacation-request-modal');
        }
        
        function submitVacationRequest() {
            const startDate = document.getElementById('vacation-start-date').value;
            const endDate = document.getElementById('vacation-end-date').value;
            const reason = document.getElementById('vacation-reason').value;
            
            if (!startDate || !endDate || !reason.trim()) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è', 'error');
                return;
            }
            
            const newRequest = {
                id: Date.now(),
                type: 'vacation',
                userId: currentUser.username,
                userName: currentUser.name,
                startDate: startDate,
                endDate: endDate,
                reason: reason,
                status: 'pending',
                createdAt: formatDate(new Date())
            };
            
            requests.push(newRequest);
            closeModal('vacation-request-modal');
            showNotification('–ó–∞—è–≤–∫–∞ –Ω–∞ –æ—Ç–ø—É—Å–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∞–º–∏
        function renderRequests() {
            let html = '';
            
            if (requests.length === 0) {
                html = '<div class="card">–ù–µ—Ç –∑–∞—è–≤–æ–∫</div>';
            } else {
                requests.forEach(request => {
                    const statusClass = `status-${request.status}`;
                    const statusText = request.status === 'pending' ? '–û–∂–∏–¥–∞–µ—Ç' : 
                                     request.status === 'approved' ? '–û–¥–æ–±—Ä–µ–Ω–∞' : '–û—Ç–∫–ª–æ–Ω–µ–Ω–∞';
                    
                    if (request.type === 'vacation') {
                        html += `
                            <div class="request-item ${request.status}">
                                <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 10px;">
                                    <div style="flex: 1; min-width: 200px;">
                                        <h4 style="margin: 0 0 8px 0;">–ó–∞—è–≤–∫–∞ –Ω–∞ –æ—Ç–ø—É—Å–∫</h4>
                                        <p style="margin: 4px 0;"><strong>–°–æ—Ç—Ä—É–¥–Ω–∏–∫:</strong> ${request.userName}</p>
                                        <p style="margin: 4px 0;"><strong>–ü–µ—Ä–∏–æ–¥:</strong> ${request.startDate.split('-').reverse().join('.')} - ${request.endDate.split('-').reverse().join('.')}</p>
                                        <p style="margin: 4px 0;"><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> ${request.reason}</p>
                                        <p style="margin: 4px 0;"><strong>–î–∞—Ç–∞ –ø–æ–¥–∞—á–∏:</strong> ${request.createdAt.split('-').reverse().join('.')}</p>
                                    </div>
                                    <div style="text-align: right; flex-shrink: 0;">
                                        <span class="status-badge ${statusClass}">${statusText}</span>
                                        ${currentUser.role === 'manager' && request.status === 'pending' ? `
                                            <div class="button-group" style="margin-top: 10px;">
                                                <button onclick="approveRequest(${request.id})" style="margin-right: 5px; padding: 6px 12px; font-size: 12px;">–û–¥–æ–±—Ä–∏—Ç—å</button>
                                                <button onclick="rejectRequest(${request.id})" class="button-danger" style="padding: 6px 12px; font-size: 12px;">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        `;
                    } else if (request.type === 'inventory') {
                        html += `
                            <div class="request-item ${request.status}">
                                <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 10px;">
                                    <div style="flex: 1; min-width: 200px;">
                                        <h4 style="margin: 0 0 8px 0;">–ó–∞—è–≤–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</h4>
                                        <p style="margin: 4px 0;"><strong>–°–æ—Ç—Ä—É–¥–Ω–∏–∫:</strong> ${request.userName}</p>
                                        <p style="margin: 4px 0;"><strong>–ú–∞—Ç–µ—Ä–∏–∞–ª:</strong> ${getPipeTypeName(request.itemId)}</p>
                                        <p style="margin: 4px 0;"><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</strong> ${request.amount}</p>
                                        <p style="margin: 4px 0;"><strong>–ü—Ä–∏—á–∏–Ω–∞:</strong> ${request.reason}</p>
                                        <p style="margin: 4px 0;"><strong>–î–∞—Ç–∞ –ø–æ–¥–∞—á–∏:</strong> ${request.createdAt.split('-').reverse().join('.')}</p>
                                    </div>
                                    <div style="text-align: right; flex-shrink: 0;">
                                        <span class="status-badge ${statusClass}">${statusText}</span>
                                        ${currentUser.role === 'manager' && request.status === 'pending' ? `
                                            <div class="button-group" style="margin-top: 10px;">
                                                <button onclick="approveInventoryRequest(${request.id})" style="margin-right: 5px; padding: 6px 12px; font-size: 12px;">–û–¥–æ–±—Ä–∏—Ç—å</button>
                                                <button onclick="rejectRequest(${request.id})" class="button-danger" style="padding: 6px 12px; font-size: 12px;">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</button>
                                            </div>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        `;
                    }
                });
            }
            
            document.getElementById('requests-list').innerHTML = html;
        }
        
        function approveRequest(requestId) {
            const request = requests.find(r => r.id === requestId);
            if (!request) return;
            
            request.status = 'approved';
            
            // –ï—Å–ª–∏ —ç—Ç–æ –∑–∞—è–≤–∫–∞ –Ω–∞ –æ—Ç–ø—É—Å–∫, –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å
            if (request.type === 'vacation') {
                const employeeId = employees.find(e => e.name === request.userName)?.id;
                if (employeeId) {
                    events.push({
                        id: Date.now(),
                        type: 'vacation',
                        startDate: request.startDate,
                        endDate: request.endDate,
                        employeeId: employeeId,
                        comments: []
                    });
                }
            }
            
            renderRequests();
            renderCalendar();
            showNotification('–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞');
        }
        
        function approveInventoryRequest(requestId) {
            const request = requests.find(r => r.id === requestId);
            if (!request) return;
            
            request.status = 'approved';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é —Ä–∞—Å—Ö–æ–¥–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ
            inventoryOperations.push({
                id: Date.now(),
                itemId: request.itemId,
                date: formatDate(new Date()),
                type: 'out',
                amount: request.amount,
                notes: `–í—ã–¥–∞–Ω–æ ${request.userName} - ${request.reason}`
            });
            
            renderRequests();
            renderInventoryGrid();
            showNotification('–ó–∞—è–≤–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∞, –º–∞—Ç–µ—Ä–∏–∞–ª—ã —Å–ø–∏—Å–∞–Ω—ã —Å–æ —Å–∫–ª–∞–¥–∞');
        }
        
        function rejectRequest(requestId) {
            const request = requests.find(r => r.id === requestId);
            if (!request) return;
            
            request.status = 'rejected';
            renderRequests();
            showNotification('–ó–∞—è–≤–∫–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞');
        }
        
        // –ó–∞—è–≤–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
        function openInventoryRequestModal(itemId) {
            selectedInventoryItem = itemId;
            const itemName = itemId === 0 ? "–î–∏–∑–µ–ª—å–Ω–æ–µ —Ç–æ–ø–ª–∏–≤–æ" : getPipeTypeName(itemId);
            document.getElementById('inventory-request-title').textContent = `–ó–∞–ø—Ä–æ—Å: ${itemName}`;
            document.getElementById('request-amount').value = '';
            document.getElementById('request-reason').value = '';
            openModal('inventory-request-modal');
        }
        
        function submitInventoryRequest() {
            const amount = parseInt(document.getElementById('request-amount').value);
            const reason = document.getElementById('request-reason').value.trim();
            
            if (!amount || amount <= 0 || !reason) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'error');
                return;
            }
            
            const newRequest = {
                id: Date.now(),
                type: 'inventory',
                userId: currentUser.username,
                userName: currentUser.name,
                itemId: selectedInventoryItem,
                amount: amount,
                reason: reason,
                status: 'pending',
                createdAt: formatDate(new Date())
            };
            
            requests.push(newRequest);
            closeModal('inventory-request-modal');
            showNotification('–ó–∞—è–≤–∫–∞ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞');
        }
        
        // –ë—Ä–∏–≥–∞–¥—ã
        function renderTeams() {
            let html = '';
            
            teams.forEach(team => {
                const teamEmployees = employees.filter(e => e.teamId === team.id);
                
                let employeesHtml = '';
                teamEmployees.forEach(employee => {
                    employeesHtml += `
                        <span class="employee-chip" style="background-color: ${team.color}20; color: ${team.color}; border: 1px solid ${team.color}40;">
                            ${employee.name}
                            <span onclick="removeEmployeeFromTeam(${employee.id}, event)" style="margin-left: 5px; cursor: pointer; color: #ff3b30;">√ó</span>
                        </span>
                    `;
                });
                
                html += `
                    <div class="card">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <h3 style="margin: 0; flex: 1;">${team.name}</h3>
                            <div style="width: 20px; height: 20px; border-radius: 50%; background-color: ${team.color};"></div>
                        </div>
                        <div style="margin-bottom: 15px;">${employeesHtml}</div>
                        <div class="button-group" style="align-items: stretch;">
                            <select id="add-to-team-${team.id}" style="flex: 1; min-width: 0;">
                                <option value="">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</option>
                                ${employees.filter(e => !e.teamId).map(e => 
                                    `<option value="${e.id}">${e.name}</option>`
                                ).join('')}
                            </select>
                            <button onclick="addEmployeeToTeam(${team.id})">–î–æ–±–∞–≤–∏—Ç—å</button>
                            <button onclick="deleteTeam(${team.id})" class="button-danger">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('teams-list').innerHTML = html;
        }
        
        function renderEmployees() {
            let html = '';
            
            employees.forEach(employee => {
                const roleText = employee.role === 'manager' ? '–£–ø—Ä–∞–≤–ª—è—é—â–∏–π' : '–°–æ—Ç—Ä—É–¥–Ω–∏–∫';
                html += `
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; align-items: start; flex-wrap: wrap; gap: 10px;">
                            <div style="flex: 1; min-width: 150px;">
                                <div style="font-weight: 600; margin-bottom: 4px;">${employee.name}</div>
                                <div style="color: #6c757d; font-size: 14px;">${roleText}</div>
                            </div>
                            <div class="button-group" style="align-items: stretch;">
                                <select id="assign-team-${employee.id}" style="min-width: 120px;">
                                    <option value="">–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω</option>
                                    ${teams.map(team => 
                                        `<option value="${team.id}" ${employee.teamId === team.id ? 'selected' : ''}>${team.name}</option>`
                                    ).join('')}
                                </select>
                                <button onclick="assignEmployeeToTeam(${employee.id})">–ù–∞–∑–Ω–∞—á–∏—Ç—å</button>
                                <button onclick="deleteEmployee(${employee.id})" class="button-danger">–£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('employees-list').innerHTML = html;
        }
        
        function selectTeamColor(color) {
            selectedTeamColor = color;
            document.querySelectorAll('#color-chips .chip-option').forEach(opt => opt.classList.remove('selected'));
            event.target.classList.add('selected');
            document.getElementById('team-color').value = color;
        }
        
        function openTeamModal() {
            document.getElementById('team-name').value = '';
            selectedTeamColor = "#667eea";
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ü–≤–µ—Ç–∞
            document.querySelectorAll('#color-chips .chip-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector('#color-chips .chip-option').classList.add('selected');
            document.getElementById('team-color').value = "#667eea";
            
            openModal('team-modal');
        }
        
        function openEmployeeModal() {
            document.getElementById('employee-name').value = '';
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±–æ—Ä —Ä–æ–ª–∏
            document.querySelectorAll('.role-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector('.role-option').classList.add('selected');
            document.getElementById('employee-role').value = 'employee';
            
            openModal('employee-modal');
        }
        
        function saveTeam() {
            const name = document.getElementById('team-name').value.trim();
            const color = document.getElementById('team-color').value;
            
            if (!name) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –±—Ä–∏–≥–∞–¥—ã', 'error');
                return;
            }
            
            teams.push({
                id: Date.now(),
                name: name,
                color: color
            });
            
            closeModal('team-modal');
            renderTeams();
            renderEmployees();
            showNotification('–ë—Ä–∏–≥–∞–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞');
        }
        
        function saveEmployee() {
            const name = document.getElementById('employee-name').value.trim();
            const role = document.getElementById('employee-role').value;
            
            if (!name) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞', 'error');
                return;
            }
            
            employees.push({
                id: Date.now(),
                name: name,
                teamId: null,
                role: role
            });
            
            closeModal('employee-modal');
            renderTeams();
            renderEmployees();
            showNotification('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω');
        }
        
        function assignEmployeeToTeam(employeeId) {
            const select = document.getElementById(`assign-team-${employeeId}`);
            const teamId = select.value ? parseInt(select.value) : null;
            
            const employee = employees.find(e => e.id === employeeId);
            if (employee) {
                employee.teamId = teamId;
                renderTeams();
                renderEmployees();
                showNotification('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–∞–∑–Ω–∞—á–µ–Ω');
            }
        }
        
        function addEmployeeToTeam(teamId) {
            const select = document.getElementById(`add-to-team-${teamId}`);
            const employeeId = parseInt(select.value);
            
            if (employeeId) {
                const employee = employees.find(e => e.id === employeeId);
                if (employee) {
                    employee.teamId = teamId;
                    renderTeams();
                    renderEmployees();
                    showNotification('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –±—Ä–∏–≥–∞–¥—É');
                }
            }
        }
        
        function removeEmployeeFromTeam(employeeId, event) {
            event.stopPropagation();
            
            const employee = employees.find(e => e.id === employeeId);
            if (employee) {
                employee.teamId = null;
                renderTeams();
                renderEmployees();
                showNotification('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ç–∫—Ä–µ–ø–ª–µ–Ω –æ—Ç –±—Ä–∏–≥–∞–¥—ã');
            }
        }
        
        function deleteTeam(teamId) {
            if (confirm("–£–¥–∞–ª–∏—Ç—å –±—Ä–∏–≥–∞–¥—É? –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –±—É–¥—É—Ç –æ—Ç–∫—Ä–µ–ø–ª–µ–Ω—ã.")) {
                teams = teams.filter(t => t.id !== teamId);
                employees.forEach(e => {
                    if (e.teamId === teamId) {
                        e.teamId = null;
                    }
                });
                renderTeams();
                renderEmployees();
                showNotification('–ë—Ä–∏–≥–∞–¥–∞ —É–¥–∞–ª–µ–Ω–∞');
            }
        }
        
        function deleteEmployee(employeeId) {
            if (confirm("–£–¥–∞–ª–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞?")) {
                employees = employees.filter(e => e.id !== employeeId);
                renderTeams();
                renderEmployees();
                showNotification('–°–æ—Ç—Ä—É–¥–Ω–∏–∫ —É–¥–∞–ª–µ–Ω');
            }
        }
        
        // –°–∫–ª–∞–¥
        function renderInventoryGrid() {
            let html = '';
            
            pipeTypes.forEach(type => {
                const currentAmount = calculateCurrentAmount(type.id);
                const minStock = getPipeTypeMinStock(type.id);
                const needsRestock = currentAmount < minStock;
                
                const clickHandler = currentUser.role === 'manager' ? 
                    `openInventoryHistoryModal(${type.id})` : 
                    `openInventoryRequestModal(${type.id})`;
                
                html += `
                    <div class="inventory-item" onclick="${clickHandler}">
                        <div class="inventory-item-header">
                            <div class="inventory-item-title">${type.name}</div>
                            <div class="inventory-item-amount">${currentAmount}</div>
                        </div>
                        ${needsRestock ? 
                            `<div class="inventory-item-warning">‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (–º–∏–Ω. ${minStock})</div>` : 
                            ''}
                        <div style="margin-top: 10px; font-size: 14px; color: #6c757d;">
                            ${currentUser.role === 'manager' ? '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è' : '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞'}
                        </div>
                    </div>
                `;
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ø–ª–∏–≤–æ
            const fuelAmount = calculateCurrentAmount(0);
            const fuelClickHandler = currentUser.role === 'manager' ? 
                `openInventoryHistoryModal(0)` : 
                `openInventoryRequestModal(0)`;
            
            html += `
                <div class="inventory-item" onclick="${fuelClickHandler}">
                    <div class="inventory-item-header">
                        <div class="inventory-item-title">üõ¢Ô∏è –î–∏–∑–µ–ª—å–Ω–æ–µ —Ç–æ–ø–ª–∏–≤–æ</div>
                        <div class="inventory-item-amount">${fuelAmount} –ª</div>
                    </div>
                    <div style="margin-top: 10px; font-size: 14px; color: #6c757d;">
                        ${currentUser.role === 'manager' ? '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è' : '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞'}
                    </div>
                </div>
            `;
            
            document.getElementById('inventory-grid').innerHTML = html;
        }
        
        function openInventoryHistoryModal(itemId) {
            selectedInventoryItem = itemId;
            
            const title = itemId === 0 ? "–î–∏–∑–µ–ª—å–Ω–æ–µ —Ç–æ–ø–ª–∏–≤–æ" : getPipeTypeName(itemId);
            document.getElementById('inventory-history-title').textContent = `–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π: ${title}`;
            
            const currentAmount = calculateCurrentAmount(itemId);
            document.getElementById('inventory-current-amount').textContent = 
                itemId === 0 ? `${currentAmount} –ª` : currentAmount;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏
            const addBtn = document.getElementById('add-operation-btn');
            if (currentUser.role === 'manager') {
                addBtn.style.display = 'inline-block';
            } else {
                addBtn.style.display = 'none';
            }
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–∞–±–ª–∏—Ü—É –∏—Å—Ç–æ—Ä–∏–∏
            const tbody = document.getElementById('inventory-history-table');
            tbody.innerHTML = '';
            
            const operations = inventoryOperations
                .filter(op => op.itemId === itemId)
                .sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (operations.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center; padding: 20px; color: #6c757d;">–ù–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π</td></tr>';
            } else {
                operations.forEach(op => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td style="padding: 12px 15px; border-bottom: 1px solid #d2d2d7;">${op.date.split('-').reverse().join('.')}</td>
                        <td style="padding: 12px 15px; border-bottom: 1px solid #d2d2d7;">${op.type === 'in' ? 'üìà –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ' : 'üìâ –†–∞—Å—Ö–æ–¥'}</td>
                        <td style="padding: 12px 15px; border-bottom: 1px solid #d2d2d7; color: ${op.type === 'in' ? '#28a745' : '#dc3545'}; font-weight: 600;">
                            ${op.type === 'in' ? '+' : '-'}${op.amount}${itemId === 0 ? ' –ª' : ''}
                        </td>
                        <td style="padding: 12px 15px; border-bottom: 1px solid #d2d2d7;">${op.notes}</td>
                    `;
                    tbody.appendChild(row);
                });
            }
            
            openModal('inventory-history-modal');
        }
        
        function openInventoryOperationModal() {
            const title = selectedInventoryItem === 0 ? 
                "–î–∏–∑–µ–ª—å–Ω–æ–µ —Ç–æ–ø–ª–∏–≤–æ" : 
                getPipeTypeName(selectedInventoryItem);
            
            document.getElementById('inventory-operation-title').textContent = 
                `–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é: ${title}`;
            
            document.getElementById('inventory-operation-date').value = formatDate(new Date());
            document.getElementById('inventory-operation-amount').value = '';
            document.getElementById('inventory-operation-notes').value = '';
            document.getElementById('inventory-operation-type').value = 'in';
            
            openModal('inventory-operation-modal');
        }
        
        function saveInventoryOperation() {
            const type = document.getElementById('inventory-operation-type').value;
            const date = document.getElementById('inventory-operation-date').value;
            const amount = parseFloat(document.getElementById('inventory-operation-amount').value);
            const notes = document.getElementById('inventory-operation-notes').value;
            
            if (date && !isNaN(amount) && amount > 0) {
                inventoryOperations.push({
                    id: Date.now(),
                    itemId: selectedInventoryItem,
                    date: date,
                    type: type,
                    amount: amount,
                    notes: notes
                });
                
                closeModal('inventory-operation-modal');
                openInventoryHistoryModal(selectedInventoryItem);
                renderInventoryGrid();
                showNotification('–û–ø–µ—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞');
            } else {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'error');
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –≤—Ö–æ–¥–∞
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    login();
                }
            });
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            // –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å —ç–∫—Ä–∞–Ω–∞ –≤—Ö–æ–¥–∞
        };
    </script>
</body>
</html>